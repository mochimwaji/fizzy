<% @page_title = "Column: #{ @column.name }" %>

<% content_for :header do %>
  <div class="header__actions header__actions--start">
    <%= link_back_to_board(@column.board) %>
  </div>

  <h1 class="header__title divider divider--fade full-width">
    <span class="overflow-ellipsis"><%= @page_title %></span>
  </h1>

  <%# Mobile column navigation %>
  <div class="header__actions header__actions--end mobile-column-nav">
    <% if (prev_path = prev_column_path(@column)) %>
      <%= link_to prev_path, class: "btn btn--icon mobile-column-nav__btn" do %>
        <%= icon_tag("arrow-left") %>
        <span class="for-screen-reader">Previous column</span>
      <% end %>
    <% else %>
      <span class="btn btn--icon mobile-column-nav__btn" style="visibility: hidden;">
        <%= icon_tag("arrow-left") %>
      </span>
    <% end %>
    <span class="mobile-column-nav__position"><%= column_position_label(@column) %></span>
    <% if (next_path = next_column_path(@column)) %>
      <%= link_to next_path, class: "btn btn--icon mobile-column-nav__btn" do %>
        <%= icon_tag("arrow-right") %>
        <span class="for-screen-reader">Next column</span>
      <% end %>
    <% else %>
      <span class="btn btn--icon mobile-column-nav__btn" style="visibility: hidden;">
        <%= icon_tag("arrow-right") %>
      </span>
    <% end %>
  </div>
<% end %>

<section class="cards cards--grid" 
         data-controller="mobile-columns"
         data-mobile-columns-prev-url-value="<%= prev_column_path(@column) %>"
         data-mobile-columns-next-url-value="<%= next_column_path(@column) %>">
  <%= turbo_frame_tag @column, :cards do %>
    <% if @page.used? %>
      <%= with_automatic_pagination dom_id(@column, :cards), @page do %>
        <%= render "boards/columns/list", cards: @page.records, draggable: true %>
      <% end %>
    <% else %>
      <div class="cards__list">
        <div class="card blank-slate blank-slate--card">
          <p class="txt-align-center">Drag cards here</p>
          <p class="txt-align-center blank-slate-for-grid">Nothing here</p>
        </div>
      </div>
    <% end %>
  <% end %>
</section>
