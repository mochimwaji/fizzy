<% @page_title = "Notifications settings" %>

<% content_for :header do %>
  <h1 class="header__title"><%= @page_title %></h1>
<% end %>

<section class="settings">
  <div class="settings__panel settings__panel--users panel shadow center">
    <h2 class="txt-medium txt-uppercase divider">Boards</h2>
    <div class="settings__user-list flex flex-column gap-half">
      <%= render partial: "notifications/settings/board", collection: @boards, locals: { user: Current.user } %>
    </div>
  </div>

  <div class="settings__panel panel shadow center">
    <%= render "notifications/settings/push_notifications" %>

    <section class="panel unpad borderless center flex flex-column gap-half margin-block-start">
      <h2 class="txt-medium txt-uppercase divider margin-none-block-end">Email Notification Rules</h2>
      <p class="margin-none">Create rules to receive email notifications for cards matching specific criteria like boards, tags, or due dates.</p>
      <div class="flex gap-half margin-block-start-half">
        <%= link_to notifications_rules_path, class: "btn btn--primary" do %>
          <%= icon_tag "settings" %>
          <span>Manage Rules</span>
        <% end %>
        <span class="txt-small txt-muted align-self-center">
          <%= pluralize(Current.user.notification_rules.active.count, "active rule") %>
        </span>
      </div>
    </section>
  </div>
</section>
